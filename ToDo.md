# ToDo & Issues

## Open

### ToDo 
- API
  - [ ] Common
  - [ ] Ranges
    - [x] Deprecate vertex_vertex_range_t (and related types and functions) in favor of adjacency_edge_view
    - [x] Deprecate edge_range_t (and related types and functions) in favor of edge_view
  - [ ] Concepts and type_traits
  - [ ] Accessor functions
    - [x] as CPO
    - [x] default implementations (e.g. degree==size)
    - [x] [deprecated] check for vertex_vertex_t == vertex_edge_t on overloaded functions for both
- Algorithms
  - [ ] Common
  - [ ] Ranges
    - [ ] BFS
    - [ ] DFS
    - [ ] Toplogical Sort
  - [ ] Graph Views
    - [ ] **edge_range<graph, vertex_range, vertex_edge_range>**
    - [x] for([vkey, v] : vertices_view(g,u): vertex_vertex_range<graph, vertex_range, vertex_edge_range>
    - [x] for([ukey, u] : vertices_view(g))
    - [x] for([vkey,uv] : edges_view(g,u)) (incidence)
    - [ ] define views as CPOs
    - [x] Add view types in std::graph::view
      - [ ] Use the types in the view functions
      - [ ] Add optional value function object parameters to the functions
  - [ ] Algorithms (full & simplified/book)
    - [ ] Shortest Paths
      - [x] Dijkstra (book, impl from AndrewL)
      - [ ] Dijkstra
      - [ ] Bellman-Ford
    - [ ] Connected Components
    - [ ] Strongly Connected Components
    - [ ] Biconnected Components
    - [ ] Articulation Points
    - [ ] Transitive Closure
- Graph Containers (data structures)
    - [ ] vol_graph
    - [ ] **csr_graph**
      - [ ] Implement graph, vertex, edge
      - [ ] Load from CSV file
      - [ ] Validate with vol_graph tests
    - [ ] edge_list_graph
    - [ ] dynamic_graph: vol template params for vertex & edge containers (like stack/queue)
    - [ ] directed_adjacency_vector
    - [ ] undirected_adjacency_list
    - [ ] graph with map-based vertices (requires different algorithm impl)
- [ ] Testing Patterns
  - [x] Validate content
  - [ ] Validate graph API
    - [ ] All functions work (with/without defaults)
    - [ ] Minimal functions functional (sourced/unsourced): vertices(g), edges(g,u), target_key(g,uv), source_key(g,uv)
    - [ ] Default values same as dynamic graph values
  - [ ] Validate algorithms
  - [ ] Validate const
  - [ ] Validate constexpr
  - [ ] Apply to multiple data structures
- Tools, Libraries & Infrastructure
  - [ ] Create mtx parser (from nwgraph)
  - [ ] **Constexpr unit tests (initial tests to verify pattern)**
  - [ ] Generate doxygen output
  - [ ] Validate address sanitizer build
  - [ ] Support Clang (waiting for full concepts support)
- Feature & performance comparison
  - [ ] boost::graph
  - [ ] NWGraph
- C\+\+20 and C\+\+23
  - [ ] modules
  - [ ] coroutines (simplify DFS, BFS & TopoSort?)
- Documentation
  - [ ] REAME.md
    - [ ] Add general description
    - [ ] Add link to paper
    - [ ] Add instructions for building
- Feedback

### Issues
- [ ] Can't run tests in VS+WSL2 (they will run in VSCode, but is slow)
  - [ ] Submit a defect to MS?
- [ ] csv_parser
  - [ ] CSVReader doesn't conform to the C++20 input_range concept; can't define load functions properly
    - [ ] What's missing? const types; other?
  - [ ] leading & trailing spaces for quoted values aren't ignored
  - [ ] can it be reused for multi-pass?
  - [x] Fork: No response to issues submitted
- [ ] Are the CSR vertex & edge types different? (requirement of incidence and adjacency concepts)
- [ ] What is the best dynamic graph to propose for the std? vol, vov?
- [ ] Can an edgelist be trivially created by a user? (e.g. vector<pair<target_key,weight>>)
- [ ] If we have an access namespace, do we need a container namespace?
- [ ] Best way to extend vol_graph to support different container types?
  - [ ] template-template parameters?
  - [ ] container template arguments like stack/queue?
  - [ ] template specializations? (extension of current implementation)
- [ ] SG19 Input
  - [ ] Core data structures? static graph(CSR), dynamic graph (vol variant), edgelist graph
  - [ ] vertex_key or vertex_id?
- [ ] Can we drop the vertex_verge_range in favor of just having vertices_view(g,u) [adjacency view]?

### Presentation
- [ ] Step back and start fresh
  - [ ] prototype impl gathering cruft
  - [ ] some abilities not available: loading data from CSV, constexpr testing
  - [ ] struggling with proper interface
  - [ ] data structures ???
  - [ ] learning C++20: ranges, concepts, CPO, ...
- [ ] Andrew's feedback
  - [ ] awkward syntax: iterator --> reference parameter (before & after)
    - [ ] Reference parameter exception: vertex_key(g,ui)
  - [ ] separate source_key/source from target_key/target
  - [ ] Demonstrate Dijkstra's code (design w/ Andrew)
    - [ ] view: edges_view(g,u)
- [ ] Observation: 2 core data structures
  - [ ] edge list
  - [ ] incidence graph with different views
      - [ ] vertices_view(g)
      - [ ] edges_view(g,u) - incidence edges on a vertex
      - [ ] vertices_view(g,u) - adjacency/neighbors of a vertex
      - [ ] edges_view(g) - edgelist in graph
- [ ] Graph API
  - [ ] ranges
    - [ ] incidence graph (2 ranges)
    - [ ] edge list (1 range)
    - [ ] removed: vertex_vertex_range_t<G> & edge_range_t<G> (+ related types & fncs) in favor of views
      - [ ] assumption: specialized adjacency or edge list views won't be better on native graph
  - [ ] functions:
    - [ ] required: vertices(g), edges(g,u), target_key(g,uv), 
    - [ ] optional: edge_value(g,uv), vertex_value(g,u), graph_value(g), vertex_key(g,ui), source_key(g,uv), contains_edge(g,ukey,vkey)
    - [ ] other: degree(g,u), target(g,uv), source(g,uv), edge_key(g,uv), other_key(g,uv,xkey), other_vertex(g,uv,x), 
                 find_vertex(g,ukey), find_vertex_edge(g,u,vkey), find_vertex_edge(g,ukey,vkey)
    - [ ] removed: find_vertex_vertex(g,u,vkey), find_vertex_vertex(g,ukey,vkey), find_edge(g,ukey,vkey)
- [ ] Data structures
  - [ ] replace directed_adjacency_vector with csr_graph
  - [ ] experimental: dynamic_graph that allows use of different containers
    - [ ] vertices: vector, deque. 
    - [ ] edges: forward_list, list, vector, deque
    - [ ] future: map, multimap, unordered_map, unordered_multimap, mset, multiset, unordered_set, unordered_multiset
  - [ ] undirected_adjacency_list has value for validating algorithms

## Resolved
### ToDo Completed
- API
  - [x] graph types
  - [x] vertex types
  - [x] edge types
  - [x] ranges
    - [x] vertex_range
    - [x] vertex_edge_range
    - [x] vertex_vertex_range
    - [x] edge_range
- Algorithms
- Graph Containers (data structures)
    - [x] vol_graph_ (vector of forward_list)
      - [x] Implement graph, vector, edge
      - [x] Load from CSV file
      - [x] Add \<bool sourced\> template parameter to include source_key
- C\+\+20 and C\+\+23
  - [x] connection points (e.g. tag_invoke)
- Tools, Libraries & Infrastructure
  - [x] Use CMake Presets; must work with both VS & VSCode
  - [x] Use conan for libraries when possible: catch2, fmt, spdlog, range-v3
  - [x] Include csv_parser library
- Documentation
- Feedback

### Issues Resolved
- [x] vertex_key(g,u) now takes a vertex reference (not iterator)
  - [x] how to define vertex_key_t without calling vertex_key()? 
  - [x] make it obvious it's unavailable for non-contiguous vertices
  - [x] Answer: for([ukey,u] : vertices(g))
